"use strict";var Planner=Planner||{};Planner.init=function(){this.apiURL="http://localhost:3000/api",this.$main=$("main"),$(".register").on("click",this.register.bind(this)),$(".login").on("click",this.login.bind(this)),this.$main.on("submit","form",this.handleForm),this.$main.on("click",".logout",this.logOut.bind(this)),this.getToken()?this.loggedInState():this.loggedOutState()},Planner.logOut=function(n){return n.preventDefault(),window.localStorage.clear()},Planner.loggedInState=function(){$(".login").hide(),$(".register").hide(),$(".logout").show()},Planner.setToken=function(n){return window.localStorage.setItem("token",n)},Planner.handleForm=function(n){n.preventDefault();var e=""+Planner.apiURL+$(this).attr("action"),t=$(this).attr("method"),o=$(this).serialize();return Planner.ajaxRequest(e,t,o,function(n){n.token&&Planner.setToken(n.token),Planner.$main.html(" <h2>Hello "+n.user.name+"</h2> "),Planner.loggedInState()})},Planner.ajaxRequest=function(n,e,t,o){return $.ajax({url:n,method:e,data:t}).done(o).fail(function(n){console.log(n)})},Planner.register=function(n){n&&n.preventDefault(),this.$main.html('\n    <h2>Register</h2>\n    <form method="post" action="/register">\n    <div class="form-group">\n    <input class="form-control" type="text" name="user[name]" placeholder="Fullname">\n    </div>\n    <div class="form-group">\n    <input class="form-control" type="number" name="user[mobile]" placeholder="Mobile Number">\n    </div>\n    <div class="form-group">\n    <input class="form-control" type="email" name="user[emailAddress]" placeholder="Email">\n    </div>\n    <div class="form-group">\n    <input class="form-control" type="password" name="user[password]" placeholder="Password">\n    </div>\n    <div class="form-group">\n    <input class="form-control" type="password" name="user[passwordConfirmation]" placeholder="Password Confirmation">\n    </div>\n    <input class="btn btn-primary" type="submit" value="Register">\n    </form>\n    ')},Planner.login=function(n){n.preventDefault(),this.$main.html('\n    <h2>Login</h2>\n    <form method="post" action="/login">\n    <div class="form-group">\n    <input class="form-control" type="email" name="emailAddress" placeholder="Email">\n    </div>\n    <div class="form-group">\n    <input class="form-control" type="password" name="password" placeholder="Password">\n    </div>\n    <input class="btn btn-primary" type="submit" value="Login">\n    </form>\n    ')},Planner.loggedOutState=function(){$(".login").show(),$(".register").show(),$(".logout").hide()},Planner.getToken=function(){return window.localStorage.getItem("token")},$(Planner.init.bind(Planner));